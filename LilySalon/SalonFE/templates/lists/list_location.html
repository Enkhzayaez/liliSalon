{% extends "../base/operatorBase.html" %}
{% block content %}
{% load static %}
<div class="bg-[#FDE2ED]">
      <div class="max-w-7xl mx-auto mt-12 mx-5 pb-5 ">
        <div class=" p-8 w-full ">
          <div class=" flex grid grid-cols-3 w-full items-center justify-between pb-6 ">
            <div>
              <h2 class="text-black text-lg font-semibold">Салбар {{ errorMessage }}</h2>
            </div>
            <div class="">
              <form>
                <label for="default-search"
                       class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-[#F4C2C2]">Хайх</label>
                <div class="relative">
                  <div class="flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none">
                    <svg class="w-5 h-5 text-gray-500 dark:text-gray-400"
                         fill="none"
                         stroke="currentColor"
                         viewBox="0 0 24 24"
                         xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z">
                      </path>
                    </svg>
                  </div>
                  <input type="search"
                         id="default-search"
                         class="rounded-lg block  p-4 pl-10 w-full text-sm text-gray-900 bg-gray-50  border border-[#F4C2C2]  dark:bg-white dark:text-dark  focus:border-white  focus:ring-white  "
                         placeholder="Салбар хайх..."
                         required>
                  <button type="submit"
                          class=" text-white absolute right-2.5 bottom-2.5 bg-[#F4C2C2] hover:bg-[#E17F93] rounded-lg focus:outline-none focus:ring-blue-300 font-medium  text-sm px-4 py-2   ">
                    Хайх
                  </button>
                </div>
              </form>
            </div>
          </div>
          <div>
            <div class="-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto">
              <div class="inline-block min-w-full shadow rounded-lg overflow-hidden shadow-lg">
                <table class="min-w-full leading-normal bg-white ">
                  <thead>
                    <tr>
                      <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        <td class="px-5 py-5 border-b border-[#FDE2ED] " >
                          <div class="flex-shrink-0  ">
                            <input class="p-1 rounded-lg block w-full text-xs text-gray-900 border border-gray-300  cursor-pointer bg-gray-50 focus:outline-none"
                               id="image"
                               name="image"
                               type="file">
                          </div>
                        </td>
                        <td class="px-5 py-5 border-b border-[#FDE2ED] bg-white text-sm">
                          <div class="flex items-center">
                            <input class="p-2 block w-full text-xs text-black rounded-lg border border-gray-300  cursor-pointer bg-gray-50 focus:outline-none "
                                   placeholder="Салбарын байршил"
                                   id="name"
                                   name="name">
                          </div>
                        </td>
                        <td class="px-5 py-5 border-b border-[#FDE2ED] bg-white text-sm">
                          <div class="flex items-center">
                            <input class="p-2 block w-full text-xs text-black rounded-lg border border-gray-300  cursor-pointer bg-gray-50 focus:outline-none "
                                   placeholder="Хаяг"
                                   id="name"
                                   name="address">
                          </div>
                        </td>
                        <td class="px-5 py-5 border-b border-[#FDE2ED] bg-white text-sm">
                          <input class="p-2 block w-full text-xs text-gray-900 border rounded-lg border-gray-300  cursor-pointer bg-gray-50 focus:outline-none "
                                 placeholder="Утас"
                                 type="number"
                                 name="phone">
                        </td>
                        <td class="px-5 py-5 border-b border-[#FDE2ED] bg-white text-sm">
                          <input class="bg-[#F4C2C2] hover:bg-[#E17F93] px-4 py-2 rounded-md text-white font-semibold tracking-wide cursor-pointer"
                                 value="Нэмэх"
                                 type="submit"
                                 name="hair">
                        </input>
                      </td>
                    </form>
                  </tr>
                  <tr class="bg-[#FDE2ED]">
                    <th class="px-5 py-3 border-b-2 border-[#FDE2ED] bg-[#FDE2ED] text-left text-xs font-semibold text-gray-600 uppercase tracking-wider  flex justify-center">
                      Зураг
                   </th>
                    <th class="px-5 py-3 border-b-2 border-[#FDE2ED]  text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                      Салбарын дугаар
                    </th>
                    <th class="px-5 py-3 border-b-2 border-[#FDE2ED] text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                      Салбарын байршил
                    </th>
                    <th class="px-5 py-3 border-b-2 border-[#FDE2ED] text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                      Хаяг
                    </th>
                    <th class="px-5 py-3 border-b-2 border-[#FDE2ED] text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                      Холбоо барих утас
                    </th>
                    <th class="px-5 py-3 border-b-2 border-[#FDE2ED] text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                    </th>
                    <th class="px-5 py-3 border-b-2 border-[#FDE2ED] text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                    </th>
                  </tr>
                </thead>
                <tbody>
                  {% for branch in branches %}
                    <tr>
                      <td class="px-5 py-5 border-b border-[#FDE2ED] min-w-48  flex justify-center" >
                        <div class="flex-shrink-0 w-10 h-10 ">
                          <img class="w-full h-full border border-black rounded-full" src="data:image/png;base64,{{branch.image}}" alt="" />
                        </div>
                      </td>
                      <td class="px-5 py-5 border-b border-[#FDE2ED] bg-white text-sm">
                        <div class="flex items-center">
                          <p class="text-gray-900 whitespace-no-wrap">Салбар-{{ branch.id }}</p>
                        </div>
                      </td>
                      <td class="px-5 py-5 border-b border-[#FDE2ED] bg-white text-sm">
                        <div class="flex items-center">
                          <p class="text-gray-900 whitespace-no-wrap">{{ branch.name }}</p>
                        </div>
                      </td>
                      <td class="px-5 py-5 border-b border-[#FDE2ED] bg-white text-sm">
                        <p class="text-gray-900 whitespace-no-wrap">{{ branch.address }}</p>
                      </td>
                      <td class="px-5 py-5 border-b border-[#FDE2ED] bg-white text-sm">
                        <p class="text-gray-900 whitespace-no-wrap">{{ branch.phone }}</p>
                      </td>
                      <td class="px-5 py-5 border-b border-[#FDE2ED] bg-white text-sm">
                        <a href="{% url 'edit_location' branch.id %}">Засах</a>
                      </td>
                      <td class="px-5 py-5 border-b border-[#FDE2ED] bg-white text-sm">
                        <button  data-modal-target="popup-modal" data-modal-toggle="popup-modal-{{branch.id}}" type="button">Устгах</button>
                      </td>  
                        <div id="popup-modal-{{branch.id}}" aria-hidden="true" class="hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
                          <div class="relative p-4 w-full max-w-md max-h-full">
                              <div class="relative bg-white rounded-lg  ">
                                  <div class="p-4 md:p-5 text-center">
                                      <svg class="mx-auto mb-4 text-gray-400 w-12 h-12 dark:text-gray-200"  xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
                                      </svg>
                                      <h3 class="mb-5 text-lg font-normal text-gray-500 ">
                                        Та энэ захиалгыг устгахдаа итгэлтэй байна уу? {{branch.id}}
                                      </h3>
                                      <a data-modal-hide="popup-modal" type="button" 
                                        href="{% url 'delete_location' branch.id %}"
                                        class="text-white bg-red-600 hover:bg-red-800  font-medium rounded-lg text-sm px-5 py-2.5 mr-5 ">
                                          Тийм
                                      </a>
                                      <a href="" data-modal-hide="popup-modal-{{branch.id}}" type="button" 
                                        class="text-gray-500 bg-white hover:bg-gray-100  rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dakr:border-gray-500   dark:focus:ring-gray-600">
                                          Үгүй
                                    </a>
                                  </div>
                              </div>
                          </div>
                        </div>
                        <script src="https://unpkg.com/@themesberg/flowbite@1.2.0/dist/flowbite.bundle.js"></script>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
          <div class=" space-x-8 mt-10">
            <a href="{% url 'operator' %}"
               class="bg-[#F4C2C2] hover:bg-[#E17F93] px-4 py-2 rounded-md text-white font-semibold tracking-wide cursor-pointer">Буцах</a>
          </div>
        </div>
      </div>
    </div>
  </div> 
 {% endblock %}